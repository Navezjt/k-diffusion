from typing import List, Tuple

# nelorth provides the full dataset, but labels the classes with numbers.
# https://huggingface.co/datasets/nelorth/oxford-flowers
# so what is the text that should correspond to these numbers?

# I was unable to find an official "order" for the class labels,
# (they are documented alphabetically)
# https://www.robots.ox.ac.uk/~vgg/data/flowers/102/categories.html

# Multimodal-Fatima gives proper names to the labels.
# if it weren't for the fact it only has 1.02k samples: we'd use their dataset instead of nelorth's.
# but the class labels are useful to us, because the order in which they're listed seems to agree with nelorth's.
# https://huggingface.co/datasets/Multimodal-Fatima/OxfordFlowers_train/blob/d1d29bfb39747ec33f0ac0daeef78e6331edf1a6/dataset_infos.json#L11
flower_classes: List[str] = [
  'pink primrose',
  'hard-leaved pocket orchid',
  'canterbury bells',
  'sweet pea',
  'english marigold',
  'tiger lily',
  'moon orchid',
  'bird of paradise',
  'monkshood',
  'globe thistle',
  'snapdragon',
  "colt's foot",
  'king protea',
  'spear thistle',
  'yellow iris',
  'globe-flower',
  'purple coneflower',
  'peruvian lily',
  'balloon flower',
  'giant white arum lily',
  'fire lily',
  'pincushion flower',
  'fritillary',
  'red ginger',
  'grape hyacinth',
  'corn poppy',
  'prince of wales feathers',
  'stemless gentian',
  'artichoke',
  'sweet william',
  'carnation',
  'garden phlox',
  'love in the mist',
  'mexican aster',
  'alpine sea holly',
  'ruby-lipped cattleya',
  'cape flower',
  'great masterwort',
  'siam tulip',
  'lenten rose',
  'barbeton daisy',
  'daffodil',
  'sword lily',
  'poinsettia',
  'bolero deep blue',
  'wallflower',
  'marigold',
  'buttercup',
  'oxeye daisy',
  'common dandelion',
  'petunia',
  'wild pansy',
  'primula',
  'sunflower',
  'pelargonium',
  'bishop of llandaff',
  'gaura',
  'geranium',
  'orange dahlia',
  'pink-yellow dahlia', # officially this would end with a question mark ('pink-yellow dahlia?') but that's probably not useful for producing embeddings
  'cautleya spicata',
  'japanese anemone',
  'black-eyed susan',
  'silverbush',
  'californian poppy',
  'osteospermum',
  'spring crocus',
  'bearded iris',
  'windflower',
  'tree poppy',
  'gazania',
  'azalea',
  'water lily',
  'rose',
  'thorn apple',
  'morning glory',
  'passion flower',
  'lotus',
  'toad lily',
  'anthurium',
  'frangipani',
  'clematis',
  'hibiscus',
  'columbine',
  'desert-rose',
  'tree mallow',
  'magnolia',
  'cyclamen',
  'watercress',
  'canna lily',
  'hippeastrum',
  'bee balm',
  'ball moss',
  'foxglove',
  'bougainvillea',
  'camellia',
  'mallow',
  'mexican petunia',
  'bromelia',
  'blanket flower',
  'trumpet creeper',
  'blackberry lily',
]

# nelorth's data has a mapping from an ordinal index to a lexical index.
# the lexical index seems to agree with the order in which Multimodal-Fatima lists the labels.
# https://huggingface.co/datasets/nelorth/oxford-flowers/blob/main/README.md

# the idea is that if nelorth gives you a class _index_: you can look up its corresponding lexical class in this List,
# then subtract 1 from that, and you can use that as an index into flower_classes above.
# so where the HF dataset viewer says for nelorth:
# 1 (10)
# if HF datasets gives you the index 1, you can lookup ordinal_to_lexical[1] to get 10,
# then you can lookup flower_classes[10-1] to get 'globe thistle' from Multimodal-Fatima's labels.

_nelorth_to_fatima_1_indexed: List[int] = [
  1,
  10,
  100,
  101,
  102,
  11,
  12,
  13,
  14,
  15,
  16,
  17,
  18,
  19,
  2,
  20,
  21,
  22,
  23,
  24,
  25,
  26,
  27,
  28,
  29,
  3,
  30,
  31,
  32,
  33,
  34,
  35,
  36,
  37,
  38,
  39,
  4,
  40,
  41,
  42,
  43,
  44,
  45,
  46,
  47,
  48,
  49,
  5,
  50,
  51,
  52,
  53,
  54,
  55,
  56,
  57,
  58,
  59,
  6,
  60,
  61,
  62,
  63,
  64,
  65,
  66,
  67,
  68,
  69,
  7,
  70,
  71,
  72,
  73,
  74,
  75,
  76,
  77,
  78,
  79,
  8,
  80,
  81,
  82,
  83,
  84,
  85,
  86,
  87,
  88,
  89,
  9,
  90,
  91,
  92,
  93,
  94,
  95,
  96,
  97,
  98,
  99,
]
nelorth_to_fatima: Tuple[int, ...] = tuple((ix-1 for ix in _nelorth_to_fatima_1_indexed))